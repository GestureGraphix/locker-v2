(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[678],{1836:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,3729,23)),Promise.resolve().then(s.bind(s,6018))},6018:(e,r,s)=>{"use strict";s.d(r,{RegisterForm:()=>u});var a=s(3663),t=s(8967),i=s(8142),o=s(3810),n=s(6629),d=s(7942),l=s(9672),m=s(7844),c=s(3554);function u(e){let{callbackUrl:r="/training"}=e,s=(0,o.useRouter)(),{register:u,isLoading:p,error:f,clearError:g}=(0,d.kH)(),h=(0,t.mN)({resolver:(0,i.u)(n.zK),defaultValues:{name:"",email:"",password:"",confirmPassword:"",role:"ATHLETE"}}),w=async e=>{g(),await u(e.name,e.email,e.password,e.role)&&(s.push(r),s.refresh())};return(0,a.jsxs)("form",{onSubmit:h.handleSubmit(w),className:"space-y-4",children:[f&&(0,a.jsx)("div",{className:"rounded-md bg-red-50 p-3 text-sm text-red-600 dark:bg-red-900/20 dark:text-red-400",children:f}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"name",children:"Name"}),(0,a.jsx)(m.p,{id:"name",type:"text",placeholder:"John Doe",autoComplete:"name",...h.register("name"),disabled:p}),h.formState.errors.name&&(0,a.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:h.formState.errors.name.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"email",children:"Email"}),(0,a.jsx)(m.p,{id:"email",type:"email",placeholder:"athlete@example.com",autoComplete:"email",...h.register("email"),disabled:p}),h.formState.errors.email&&(0,a.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:h.formState.errors.email.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"password",children:"Password"}),(0,a.jsx)(m.p,{id:"password",type:"password",placeholder:"Create a password",autoComplete:"new-password",...h.register("password"),disabled:p}),h.formState.errors.password&&(0,a.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:h.formState.errors.password.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,a.jsx)(m.p,{id:"confirmPassword",type:"password",placeholder:"Confirm your password",autoComplete:"new-password",...h.register("confirmPassword"),disabled:p}),h.formState.errors.confirmPassword&&(0,a.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:h.formState.errors.confirmPassword.message})]}),(0,a.jsx)(l.$,{type:"submit",className:"w-full",disabled:p,children:p?"Creating account...":"Create Account"})]})}},9672:(e,r,s)=>{"use strict";s.d(r,{$:()=>l});var a=s(3663),t=s(7543),i=s(753),o=s(6749),n=s(4199);let d=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=t.forwardRef((e,r)=>{let{className:s,variant:t,size:o,asChild:l=!1,...m}=e,c=l?i.DX:"button";return(0,a.jsx)(c,{className:(0,n.cn)(d({variant:t,size:o,className:s})),ref:r,...m})});l.displayName="Button"},7844:(e,r,s)=>{"use strict";s.d(r,{p:()=>o});var a=s(3663),t=s(7543),i=s(4199);let o=t.forwardRef((e,r)=>{let{className:s,type:t,...o}=e;return(0,a.jsx)("input",{type:t,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...o})});o.displayName="Input"},3554:(e,r,s)=>{"use strict";s.d(r,{J:()=>l});var a=s(3663),t=s(7543),i=s(9334),o=s(6749),n=s(4199);let d=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)(i.b,{ref:r,className:(0,n.cn)(d(),s),...t})});l.displayName=i.b.displayName},4199:(e,r,s)=>{"use strict";s.d(r,{cn:()=>i});var a=s(3877),t=s(9200);function i(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,t.QP)((0,a.$)(r))}},6629:(e,r,s)=>{"use strict";s.d(r,{X5:()=>i,zK:()=>o});var a=s(5638);let t=a.k5(["ATHLETE","COACH","ADMIN"]),i=a.Ik({email:a.Yj().min(1,"Email is required").email("Invalid email address"),password:a.Yj().min(1,"Password is required").min(8,"Password must be at least 8 characters"),rememberMe:a.zM().optional().default(!1)}),o=a.Ik({name:a.Yj().min(1,"Name is required").min(2,"Name must be at least 2 characters").max(100,"Name is too long"),email:a.Yj().min(1,"Email is required").email("Invalid email address"),password:a.Yj().min(8,"Password must be at least 8 characters").max(128,"Password is too long").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[0-9]/,"Password must contain at least one number"),confirmPassword:a.Yj().min(1,"Please confirm your password"),role:t.optional().default("ATHLETE")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]})},7942:(e,r,s)=>{"use strict";s.d(r,{kH:()=>c});var a=s(8683),t=s(2752);let i=(0,s(6461).M)({baseURL:"http://localhost:3000"}),{signIn:o,signUp:n,signOut:d,useSession:l}=i,m={user:null,isAuthenticated:!1,isLoading:!1,isInitialized:!1,error:null},c=(0,a.v)()((0,t.Zr)((e,r)=>({...m,setUser:r=>e({user:r,isAuthenticated:!!r,isInitialized:!0}),login:async(r,s)=>{e({isLoading:!0,error:null});try{var a;let t=await i.signIn.email({email:r,password:s});if(t.error)throw Error(t.error.message||"Login failed");let o=await i.getSession();if(null===(a=o.data)||void 0===a?void 0:a.user){let r=o.data.user;return e({user:{id:r.id,email:r.email,name:r.name,role:r.role||"ATHLETE"},isAuthenticated:!0,isLoading:!1}),!0}throw Error("Failed to get session")}catch(r){return e({error:r instanceof Error?r.message:"Login failed",isLoading:!1}),!1}},register:async function(s,a,t){arguments.length>3&&void 0!==arguments[3]&&arguments[3],e({isLoading:!0,error:null});try{let e=await i.signUp.email({name:s,email:a,password:t});if(e.error)throw Error(e.error.message||"Registration failed");return r().login(a,t)}catch(r){return e({error:r instanceof Error?r.message:"Registration failed",isLoading:!1}),!1}},logout:async()=>{e({isLoading:!0});try{await i.signOut(),e({...m,isInitialized:!0})}catch(r){e({error:r instanceof Error?r.message:"Logout failed",isLoading:!1})}},refreshSession:async()=>{e({isLoading:!0});try{var r;let s=await i.getSession();if(null===(r=s.data)||void 0===r?void 0:r.user){let r=s.data.user;e({user:{id:r.id,email:r.email,name:r.name,role:r.role||"ATHLETE"},isAuthenticated:!0,isLoading:!1,isInitialized:!0})}else e({...m,isInitialized:!0})}catch(r){e({...m,isInitialized:!0})}},clearError:()=>e({error:null}),reset:()=>e(m)}),{name:"locker-user",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated})}))}},e=>{var r=r=>e(e.s=r);e.O(0,[263,41,809,358],()=>r(1836)),_N_E=e.O()}]);